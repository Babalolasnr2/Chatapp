<!DOCTYPE html>
<html>
<head>
    <title>Two-Person Chat</title>
    <style>
        /* CSS goes here (for styling) */
        #chat-box { 
            height: 300px; 
            overflow-y: scroll; 
            border: 1px solid #ccc; 
            padding: 10px; 
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Simple Two-Person Chat</h1>
    <div id="chat-box"></div>
    <input type="text" id="message-input" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        // JavaScript logic will be placed here
      // **IMPORTANT:** Change this URL if your Python server is on a different host/port
const SOCKET_SERVER_URL = 'http://127.0.0.1:5000'; 
const socket = io(SOCKET_SERVER_URL);

// Hardcode a username for this client instance (you can open two instances to test)
const USERNAME = prompt("Enter your name (e.g., Alice or Bob):");

const chatBox = document.getElementById('chat-box');
const messageInput = document.getElementById('message-input');

// 1. Handle successful connection to the server
socket.on('connect', () => {
    console.log('Connected to server!');
    appendMessage('System', `You (${USERNAME}) have joined the chat.`);
});

// 2. Handle incoming messages from the server
socket.on('receive_message', (data) => {
    // data = { user: 'SenderName', message: 'Hi there!' }
    appendMessage(data.user, data.message);
});

// 3. Function to send a message when the button is clicked
function sendMessage() {
    const message = messageInput.value.trim();
    if (message) {
        // Emit the 'send_message' event to the Python backend
        socket.emit('send_message', {
            user: USERNAME,
            message: message
        });
        messageInput.value = ''; // Clear the input
    }
}

// Helper function to update the chat box UI
function appendMessage(user, message) {
    const messageElement = document.createElement('p');
    messageElement.innerHTML = `<strong>${user}:</strong> ${message}`;
    chatBox.appendChild(messageElement);
    // Scroll to the latest message
    chatBox.scrollTop = chatBox.scrollHeight;
      }
                                        
    </script>
</body>
</html>
